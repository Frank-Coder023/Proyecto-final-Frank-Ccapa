{% extends "blog/base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h2 class="text-center mb-4">Crear Entrada de Blog</h2>

            
            
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="mb-3">
                    <label for="{{ formulario.titulo.id_for_label }}" class="form-label">Título</label>
                    
                    <textarea class="form-control" id="{{ formulario.titulo.id_for_label }}"
                        name="{{ formulario.titulo.name }}" placeholder="Agrega un titulo para tu blog" rows="1"></textarea>
                </div>
                <div class="mb-3">
                    <label for="{{ formulario.subtitulo.id_for_label }}" class="form-label">Subtítulo</label>
                    <textarea class="form-control" id="{{ formulario.subtitulo.id_for_label }}"
                        name="{{ formulario.subtitulo.name }}" placeholder="Agrega tu subtitulo para tu blog" rows="1"></textarea>
                </div>
                <div class="mb-3">
                    <label for="{{ formulario.cuerpo.id_for_label }}" class="form-label">Cuerpo</label>
                    <textarea class="form-control" id="{{ formulario.cuerpo.id_for_label }}"
                        name="{{ formulario.cuerpo.name }}" placeholder="Cuerpo" rows="6"></textarea>
                </div>
                <div class="mb-3">
                    <label for="{{ formulario.imagen.id_for_label }}" class="form-label">Imagen</label>
                    {{ formulario.imagen }}
                </div>
                <div class="mb-3">
                    <label for="{{ formulario.categoria.id_for_label }}" class="form-label">Categoría</label>
                    
                    <textarea class="form-control" id="{{ formulario.categoria.id_for_label }}"
                        name="{{ formulario.categoria.name }}" placeholder="Agrega una categoria" rows="1"></textarea>
                </div>
                
                <button class="btn btn-primary btn-block" type="submit">Crear Entrada</button>
            </form>
            {% if mensaje %}
            <div class="alert alert-success">{{ mensaje }}</div>
            {% endif %}
        </div>
    </div>
</div>
<div class="container mt-3">
    <div class="row">
        <div class="col-md-6 offset-md-3 text-center">
            <a class="btn btn-primary" href="{% url 'lista_entradas' %}">Volver a la lista de entradas</a>
        </div>
    </div>
</div>

<h2>Entradas de Blog</h2>

<ul>
    {% for entrada in entradas_blog %}
    <li>
        <strong>{{ entrada.titulo }}</strong><br>
        {{ entrada.subtitulo }}<br>
        Categoría: {{ entrada.categoria }}<br>
        Autor: {{ entrada.autor.username }}<br>
        Fecha de Creación: {{ entrada.fecha|date:"F d, Y H:i" }}<br>
        <a href="{% url 'detalle_entrada' entrada.pk %}">Ver Detalles</a>
    </li>
    {% empty %}
    <li>No hay entradas de blog disponibles.</li>
    {% endfor %}
</ul>
{% endblock %}